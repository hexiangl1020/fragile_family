---
title: "rmd"
author: "Hexiang Liu"
date: "4/5/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.height=4, fig.width=6, warning = F)
if (!require("pacman")) install.packages("pacman")
pacman::p_load(randomForest, tree, ISLR, rpart, rattle, pROC, partykit, ggplot2, glmnet, leaps, dplyr, keras, neuralnet, imager, ranger,haven,labelled)
```

```{r}
fragile_families<-read_dta('FF_allwaves_2020v2.dta')
```

```{r}
selected<-c('idnum','k6d2k','k6d1b','k6d1c','k6d1e','k6d1f','k6d1j')
six_cols<-fragile_families[,selected]
six_cols1 <- six_cols %>% filter_at(colnames(six_cols), all_vars(. >= 0))#drop negative values
six_cols1$k6d2k<-5-six_cols1$k6d2k
six_cols1[,c(2:7)]<-lapply(six_cols1[,c(2:7)],as.numeric)
six_cols1$idnum<-as.character(six_cols1$idnum)
six_cols1<-as.data.frame(six_cols1)
six_cols1<-six_cols1 %>% mutate(new_y=4*k6d2k+4*k6d1b+4*k6d1c+6*k6d1e+6*k6d1f+6*k6d1j)
```


